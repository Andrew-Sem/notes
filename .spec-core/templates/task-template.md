# Task Brief

## References

> Зафиксируйте все источники, на которые опирается задача.

- **Docs**: `prd.md`, `ui-ux.md`, `tech.md`, `plan.md`
- **Features**: `[FEAT-001, FEAT-002]`
- **Contracts**: `[API-001, API-002]`
- **Schemas**: `[SCHEMA-001, SCHEMA-002]`
- **Links**: [Figma, Notion, Confluence, обсуждения и т.п.]

[Добавьте дополнительные категории при необходимости.]

---

## Шапка

- **id**: `TASK-001`
- **name**: [Краткое название задачи]
- **description**: [1–2 предложения контекста и сути]
- **type**: `spike | scaffold | feature | integration | hardening | qa | docs | ops`
- **goal**: [Измеримое целевое состояние]
- **artifacts**:
  - **in**: [Что нужно на входе (списки артефактов, схему, конфиг и т.д.)]
  - **out**: [Что появится после выполнения задачи: файлы, сервисы, сценарии]

---

## Capability

> Опишите новую способность продукта или фикс существующей. Создайте блок для каждой capability.

### `CAP-001` — [Название capability]

- **name**: [Короткий маркер для ссылки в других документах]
- **description**: [Что получает пользователь или система]
- **scope**: [Границы применения, исключения]
- **actors**: `[Пользователь, Админ, Сервис, ...]`
- **triggers**: [События, запускающие capability]
- **outcomes**: [Результат для бизнеса/техники]

---

## Prerequisites

> Всё, что должно быть сделано до старта задачи (внешние зависимости, миграции, данные).

- **[Prerequisite name]**
  - **internal**: `[true|false]`
  - **description**: [Почему нужен prerequisite и что он даёт]

---

## Trade-offs

> Зафиксируйте принятые компромиссы и план по их отработке.

- **[Trade-off name]**
  - **description**: [Коротко о сути компромисса]
  - **reason**: [Почему выбрали именно такое решение]
  - **next_steps**:
    - **[Step name]**
      - **result**: [Какой эффект даст выполнение шага]
      - **action**: [Что нужно сделать, чтобы снять компромисс]

---

## Related modules

> Перечислите модули, на которые влияет задача, и опишите их взаимодействия.

- **module**: `[module-id]`
  - **description**: [Зона ответственности и роль модуля]
  - **consumes**:
    - **schemas**: `[Таблицы/контракты, которые читает]`
    - **apis**: `[HTTP/gRPC/GraphQL эндпоинты]`
    - **events**: `[События, на которые подписывается]`
    - **config**: `[Feature flags, env vars]`
    - **other**: [Доп. зависимости (очереди, кэши, файлы)]

---

## Design notes

> Решения, инварианты, алгоритмы, ссылки на обсуждения. Дублируйте блок на каждую заметку.

- **[Note title]**
  - **description**: [О чём заметка]
  - **context**: [Какая ситуация или гипотеза рассматривается]
  - **decision**: [Выбранный подход]
  - **rationale**: [Ключевые аргументы]
  - **impact**: [На что влияет решение: модули, метрики, пользователи]
  - **status**: `draft | approved | deprecated`
  - **links**: [PR, обсуждение, документация]

---

## Acceptance criteria

> Чёткие измеримые критерии успешности задачи.

- **functional**: [Ключевые сценарии, которые должны работать]
- **non_functional**: [Требования по производительности, безопасности, UX]
- **scenarios**:
  - `Given [контекст] When [действие] Then [результат]`
- **negative**: [Ошибочные сценарии и ожидаемая реакция]
- **out_of_scope**: [Что явно не входит в рамки задачи]

---

## Steps

> Разбейте работу на выполнимые шаги и подшаги.

- [ ] **Шаг 1** — [Название шага]
  - [ ] **Подшаг 1.1** — [Краткое описание]
  - [ ] **Подшаг 1.2** — [Краткое описание]
- [ ] **Шаг 2** — [Название шага]

[Продолжайте список, пока задача полностью не покрыта.]

---

## Checklist

> Сводка проверок перед завершением задачи.

- [ ] **[check_name]** — [Измеримый критерий, подтверждающий готовность]
- [ ] **[check_name]** — [Например: «Регистрация работает через API и UI»]

---

## AI Checklist

> Используйте базовые проверки из `.spec-core/llms.md` и актуализируйте под задачу.

- [ ] **[AI check]** — [Что должно быть проверено]
- [ ] **[AI check]** — [Например: «Задача прогнана через `/review` дважды»]
